# ConCert

A framework for smart contract verification in Coq

## How to build


Our development works with Coq 8.9.1. and depends on MetaCoq 1.0~alpha+8.9 and
the std++ library v.1.2.1. These dependencies can be installed through
`opam`. Also, there is a git submodule `smart-contract-interactions` which
corresponds to the smart contract execution framework.  To clone the project
with the submodule, use `git clone --recursive`.

Install Coq (see https://coq.inria.fr/opam-using.html for detailed instructions on how to manage
multiple Coq installations using opam).:

```bash
opam install coq.8.9.1
```

Then MetaCoq:

```bash
opam repo add coq-released https://coq.inria.fr/opam/released
opam install coq-metacoq.1.0~alpha+8.9
```
And std++:

```bash
opam repo add iris-dev https://gitlab.mpi-sws.org/iris/opam.git
opam install coq-stdpp.1.2.1
```

After completing the procedures above, run `make`. By default, `make`
will build all the development and the documentation.

## Documentation

The `docs` folder contains the autogenerated `coqdoc`
documentation. We use `CoqdocJS` by Tobias Tebbi
(https://github.com/tebbi/coqdocjs) for better usability and syntax
highlighting. One can show/hide proof using the button on the top
panel. Open [docs/toc.html](/docs/toc.html) to start browsing the documentation.

## Some highlights

* [theories/Ast.v](/theories/Ast.v) contains definition of the ``λsmart`` language.
* [theories/EvalE.v](/theories/EvalE.v) contains an interpreter for ``λsmart`` language.
* [theories/pcuic/](/theories/pcuic/) contains translation from ``λsmart`` expression to PCUIC terms, proof of soundness and various auxiliary lemmas for that proof.
* [theories/examples/](/theories/examples/) contains examples of smart contract verification: the crowdfunding contract, verification of ``Acorn`` list functions, integration with the execution framework.
* see [theories/examples/Demo.v](theories/examples/Demo.v) for demonstration of how to use our framework to write definitions using the deep embedding, convert them to Coq functions, compute with the interpreter and prove simple properties using the shallow embedding.
